# Консольное приложение для службы доставки (тестовое задание)
## Задание
Необходимо разработать консольное приложение (по желанию можно WinForms либо WebApi) для службы доставки, которое фильтрует заказы в зависимости от количества обращений в конкретном районе города и времени обращения с и по.

Входные данные для каждой строки содержат следующую информацию:
* номер заказа - можно использовать уникальный идентификатор или придумать свой;
* вес заказа в килограммах;
* район заказа - можно придумать либо название, либо идентификатор района;
* время доставки заказа - в формате: yyyy-MM-dd HH:mm:ss.

Для исходных данных можно использовать либо файл с данными (рекомендуется), либо любые СУБД, которые можно легко установить для проверки.

Также необходимо сделать логирование основных операций и валидацию входных данных.

В результирующий файл либо БД необходимо вывести результат фильтрации заказов для доставки в конкретный район города в ближайшие полчаса после времени первого заказа.

Данные для фильтрации (можно передавать через параметры консольного приложения _cityDistrict, _firstDeliveryDateTime):
* район доставки;
* время первой доставки.

Выходные файлы:
* логирование - в случае консольного приложения определить задание адреса файла через командную строку: _deliveryLog - путь к файлу с логами (либо создать в СУБД таблицу с логами);
* результат - записывать по адресу: _deliveryOrder - путь к файлу с результатом выборки (либо в СУБД таблицу).

По возможности, кроме передачи параметров через командную строку либо форму можно реализовать частичную либо полную передачу параметров через файлы конфигурации или переменные среды.

Программа не должна ломаться от некорректных входных данных (реализовать в валидации), ошибок ввода-вывода и прочим причинам, которые можно предусмотреть (реализовать обработку возможных ошибок).

Решение должно быть предоставлено в виде исходных кодов (при необходимости с дампом базы данных) в виде архива или ссылки на репозиторий с решением.

Код должен быть оптимальным, читаемым для разработчика и удобным для пользователя. При разработке желательно покрытие несколькими тестами и использование общераспространенных практик (паттерны проектирования, KISS …).

Результат тестового задания должен содержать текстовый файл readme.txt с инструкцией по настройке и конфигурированию приложения (если необходимо).

## Инструкция по настройке и конфигурированию приложения
Для обработки данных необходимо в папку с собранным .exe файлом добавить файл input.txt с входными данными в формате:
номер заказа (целове число);вес заказа (целое число);идентификатор района заказа (целое число);время доставки заказа (в формате yyyy-MM-dd HH:mm:ss)

### Пример входных данных в input.txt:

8;1;5;2024-10-07 14:09:34

9;8;3;2024-10-06 19:34:51

10;10;4;2024-10-06 16:19:34

Уже заполненный input.txt можно взять из папки проекта для тестирования DeliveryServiceTests.
В нем были сгенерированы случайные записи с параметрами:
- вес заказа от 0 до 50 кг;
- идентификатор района от 1 до 5;
- время с 2024-10-01 по 2024-10-07 с промежутками от 10 до 20 часов.

### Формат конфигурационных параметров для запуска из консоли или с помощью конфигурационного файла:
* идентификатор района для фильтрации - целое число int (по умолчанию: 1);
* время первой доставки - время DateTime, например yyyy-MM-dd HH:mm:ss (по умолчанию: текущее время);
* интервал - время TimeSpan, например HH:mm:ss (по умолчанию: 00:30:00);
* путь к файлу с результатом выборки - строка string, путь к файлу (по умолчанию: deliveryOrder.txt);
* путь к файлу с логами - строка string, путь к файлу (по умолчанию: deliveryLog.txt).

### Способы запуска:
1. С помощью параметров из консоли.
    * Запустить в консоли DeliveryService.exe с требуемыми параметрами в соответствии с форматом.

        Порядок данных, задаваемых в консоли (не обязательно задавать все):
        * идентификатор района для фильтрации;
        * время первой доставки;
        * интервал;
        * путь к файлу с результатом выборки;
        * путь к файлу с логами.

2. С помощью конфигурационного файла.
    * Открыть config.txt и изменить требуемые параметры в соответствии с форматом.
    * Запустить DeliveryService.exe.

### Дополнительно
Параметры из консоли имеют высший приоритет, но при ошибках ввода данные будут браться из конфигурационного файла или по умолчанию, если тот также будет "поврежден".

## Информация о ходе работы программы

1. Задаются параметры по умолчанию.
2. Считывается конфигурационный файл с валидацией параметров.
    - Все параметры, которые будут удачно прочитаны, будут изменены.
    - Все параметры, которые считать не получится, останутся без изменений.
3. Считываются параметры из консоли с валидацией.
    - Все параметры, которые будут удачно прочитаны, будут изменены.
    - Все параметры, которые считать не получится или они будут отсутствовать, останутся без изменений.
4. Начинается обработка входных данных.
    - При неправильном пути к файлу с логами программа останавливает работу.
    - При неправильном пути к файлу с результатом выборки программа останавливает работу.
    - При отсутствии в директории запуска input.txt с входными данными программа останавливает работу.
    - При отсутствии ошибок программа записывает логи и результат выборки в соответствующие файлы.
5. Конец работы.

## Обоснование решений
1. Был сделан выбор в пользу консольного приложения, а не WinForms и подобного потому, что это даёт возможность его использования как утилиты для других приложений, которые смогут запускать его с необходимыми параметрами без необходимости вызывать графический интерфейс.
2. Для номера заказа и района было выбрано использование уникальных идентификаторов в виде целых чисел ввиду удобства обработки. При масштабировании приложения (для получения миллиардов заказов) они легко могут быть заменены на другой тип.
3. Для логов, а также исходных и выходных данных, был сделан выбор в пользу использования файлов, а не БД. Это сделано для удобства проверки, связанного с отсутствием необходимости установки дополнительного ПО.

## Дополнительно
Помимо проекта с заданием был сделан проект для тестирования с шестью тестами, в каждом из которых на вход программа получает разное количество значений, результат действия которых сравнивается с ожидаемыми данными, которые хранятся в DataForTests.
